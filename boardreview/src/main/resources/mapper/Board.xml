<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.board">
    <insert id="insertBoard" parameterType="Board" useGeneratedKeys="true" keyProperty="num">
		<![CDATA[
            insert into board (subject, content, writedate, fileurl, writer)
                values (#{subject}, #{content}, #{writedate}, #{fileurl}, #{writer})
        ]]>
	</insert>

    <select id="selectBoardList" parameterType="Integer" resultType="Board">
        <![CDATA[
            select * from board order by num desc limit #{row}, 10
        ]]>
    </select>

    <select id="selectBoardCount" resultType="Integer">
		<![CDATA[
            select count(num) from board
        ]]>
	</select>

    <select id="selectBoard" parameterType="Integer" resultType="Board">
		<![CDATA[
            select * from board where num=#{num}
        ]]>
	</select>

    <insert id="insertFile" parameterType="FileVO" useGeneratedKeys="true" keyProperty="num">
		<![CDATA[
            insert into file (directory,name,size,contenttype,uploaddate,data)
                values(#{directory},#{name},#{size},#{contenttype},curdate(),#{data})
        ]]>
	</insert>

    <select id="selectFile" parameterType="Integer" resultType="FileVO">
		<![CDATA[
            select * from file where num=#{num}
        ]]>
	</select>
</mapper>